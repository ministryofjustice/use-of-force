{% extends "../partials/layout.html" %} 
{% from "button/macro.njk" import govukButton %} 
{% from "checkboxes/macro.njk"import govukCheckboxes %} 
{% from "back-link/macro.njk" import govukBackLink %} 
{% from "error-summary/macro.njk" import govukErrorSummary %}
{% from "summary-list/macro.njk" import govukSummaryList %}
{% import "./pagesMacros.njk" as pagesMacros %}

{% block beforeContent %}

{{ govukBackLink({
text: "Back",
href: backLink or "/"
}) }}

{% endblock %} 

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    {% if errors.length > 0 %}
    {{
      govukErrorSummary({
        titleText: 'There is a problem',
        errorList: errors,
        attributes: { 'data-qa-errors': true }
      })
    }}
    {% endif %}

    <h1 class="govuk-heading-xl">Check your answers before sending the report</h1>

           {{  pagesMacros.getUserInputs(
                  data = data.newIncident,
                  title = "New incident", 
                  url = "/form/incident/newIncident/" + bookingId
          )}}

          {{  pagesMacros.getUserInputs(
                  data = data.details,
                  title = "Details", 
                  url = "/form/incident/details/" + bookingId
          )}}

          {{  pagesMacros.getUserInputs(
                  data = data.relocationAndInjuries,
                  title = "Relocation and injuries", 
                  url = "/form/incident/relocationAndInjuries/" + bookingId
          )}}

          {{  pagesMacros.getUserInputs(
                  data = data.evidence,
                  title = "Evidence", 
                  url = "/form/incident/evidence/" + bookingId
          )}}

  </div>
  <div class="govuk-grid-column-two-thirds">

    <h2 class="govuk-heading-m">Now send the report</h2>
    <p class="govuk-body">
      By sending the report I confirm that the information I provided is correct to the best of my knowledge.
    </p>
      <form method="post">
        <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
        {{
          govukCheckboxes({
            idPrefix: 'confirm',
            name: 'confirmed',
            classes: 'govuk-checkboxes--small',
            errorMessage: errors[0],
            items: [
              {
                id: 'confirm',
                value: 'true',
                text: 'I agree'
              }
            ]
          })
        }}
        {{
          govukButton({
            text: 'Send',
            classes: 'govuk-button',
            attributes: { 'data-submit': true }
          })
        }}

        {{ 
          govukButton({
            text: "Return to task list",
            name: "submit",
            href: '/tasklist/' + bookingId,
            classes: "govuk-button govuk-button--secondary govuk-!-margin-left-3",
            attributes: {'data-qa': 'return-to-tasklist'}
          })
        }}
      </form>
  </div>
</div>

{% endblock %}
