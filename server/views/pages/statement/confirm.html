{% extends "../../partials/layout.html" %} {% from "govuk/components/button/macro.njk" import govukButton %} {% from
"govuk/components/textarea/macro.njk" import govukTextarea %} {% from "govuk/components/input/macro.njk" import
govukInput %} {% from "govuk/components/select/macro.njk" import govukSelect %} {% from
"govuk/components/fieldset/macro.njk" import govukFieldset %} 
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %} 
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% block content %}
<div class="govuk-body">
  {% if errors.length > 0 %}
  {{
    govukErrorSummary({
      titleText: 'There is a problem',
      errorList: errors,
      attributes: { 'data-qa-errors': true }
    })
  }}
  {% endif %}
  <h1 class="govuk-heading-xl mainHeading">Use of force statement - review</h1>

  <form method="POST">
    <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full ">
        <p class="govuk-!-margin-bottom-1 govuk-label--xs">Prisoner involved</p>
        <p class="govuk-!-margin-bottom-1 govuk-label--s" data-qa="offender-name">
          {{ data.displayName }} ({{ data.offenderNo }})
        </p>
      </div>
    </div>
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        <p class="govuk-!-margin-bottom-1 govuk-label--xs">Date and time of incident</p>
        <p class="govuk-!-margin-bottom-1 govuk-label--s" data-qa="date-and-time">
          {{ data.incidentDate | formatDate('DD/MM/YYYY - HH:mm')  }}
        </p>
      </div>
    </div>
    <hr />
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-one-half govuk-!-margin-top-5">
        {% call govukFieldset({ legend: { text: "When did you last attend control and restraint basic refresher
        training?", classes: "govuk-fieldset__legend--s govuk-!-width-two-thirds"} }) %}
        <p class="govuk-!-margin-bottom-1 govuk-label--xs" data-qa="last-training">
          {{ data.lastTrainingMonth }} {{ data.lastTrainingYear }}
        </p>
        {% endcall %}
      </div>
      <div class="govuk-grid-column-one-half govuk-!-margin-top-8">
        {% call govukFieldset({ legend: { text: "What year did you join the prison service?", classes:
        "govuk-fieldset__legend--s govuk-!-width-two-thirds"} }) %}
        <p class="govuk-!-margin-bottom-1 govuk-label--xs" data-qa="job-start-year">
          {{ data.jobStartYear }}
        </p>
        {% endcall %}
      </div>
    </div>
    <div class="govuk-grid-row govuk-!-margin-top-4">
      <div class="govuk-grid-column-full ">
        <p class="govuk-!-margin-bottom-1 govuk-label--s">Your statement</p>
        <p class="govuk-!-margin-bottom-1 govuk-label--xs statement" data-qa="statement">{{ data.statement }}</p>
      </div>
    </div>
    <hr />
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-one-half">
        <p class="govuk-label--s govuk-!-margin-bottom-0">By submitting this statement you confirm that:</p>
        <ul class="govuk-!-margin-top-1">
          <li>the information you've given is correct to the best of your knowledge</li>
          <li>you wrote the statement independently of other staff involved in the incident</li>
        </ul>
      </div>
    </div>
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-one-half">
        {{
          govukCheckboxes({
            idPrefix: 'confirm',
            name: 'confirmed',
            value: data.confirm,
            classes: 'govuk-checkboxes--small',
            errorMessage: errors | findError('confirm'),
            items: [
              {
                id: 'confirm',
                value: 'true',
                text: 'I agree'
              }
            ]
          })
        }}
      </div>
    </div>

    {{
      govukButton({
        text: 'Submit',
        name: 'submit',
        classes: 'govuk-button',
        attributes: { 'data-qa': 'submit' }
      })
    }}
    {{
      govukButton({
        text: 'Cancel',
        name: 'submit',
        href: '/',
        classes: 'govuk-button govuk-button--secondary govuk-!-margin-left-3',
        attributes: { 'data-qa': 'cancel' }
      })
    }}
  </form>
</div>
{% endblock %}
