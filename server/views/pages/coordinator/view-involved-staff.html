{% extends "../../partials/prisonerBannerLayout.njk" %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/button/macro.njk" import govukButton %} 

{% set pageTitle = 'Staff involved' %}

{% block content %}
<div class="govuk-grid-row govuk-!-margin-left-0 govuk-!-margin-right-0">
    <div class="govuk-!-margin-top-0 govuk-!-margin-bottom-9 govuk-!-padding-right-2"><!-- govuk-grid-column-three-quarters -->
        <span class="govuk-caption-xl">Edit a use of force report</span>
        <h1 class="govuk-heading-xl govuk-!-margin-bottom-4">{{ pageTitle }}</h1>  
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">
                <table class="govuk-table" data-qa="involved-staff-table">
                    <thead class="govuk-table__head">
                        <tr class="govuk-table__row">
                            <th class="govuk-table__header " scope="col">Name</th>
                            <th class="govuk-table__header" scope="col">Email address</th>
                            <th class="govuk-table__header govuk-!-text-align-right" scope="col">Action</th>
                        </tr>
                    </thead>

                    <tbody class="govuk-table__body">
                        {% for staff in data.staffInvolved|sort(true, true, 'isReporter') %}
                            {% set href = '/' + data.reportId + '/delete-involved-staff/' + staff.username %}
                            <tr class="govuk-table__row">
                                <td class="govuk-table__cell">{{ staff.name }} ({{ staff.username }})</td>
                                <td class="govuk-table__cell">{{ staff.email }}</td>
                                <td class="govuk-table__cell govuk-!-text-align-right">
                                    {% if staff.username != data.username %}
                                        <a href="{{ href }}"
                                            draggable="false"
                                            class="govuk-link"
                                            data-qa="delete-link-{{ loop.index }}">Delete</a>
                                    {% endif %}
                                </td>
                            </tr>
                        {% else %}
                            <tr class="govuk-table__row">
                                <td class="govuk-table__cell" colspan="3">No staff have been added yet.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <div class="govuk-grid-row govuk-!-margin-left-0">
                    <div class="govuk-button-group govuk-!-margin-bottom-0" style="display: flex; align-items: center;">
                        <a href="/{{ data.reportId }}/edit-report/staff-involved-search" role="button" class="govuk-button" draggable="false">Add someone</a>

                        <a href="/{{ data.reportId }}/view-incident?tab=report" class="govuk-link govuk-!-margin-left-1">Return to incident report</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
